<!-- Page Title Section -->
<section class="page-title bg-title overlay-dark">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <div class="title">
          <h3>Event Details</h3>
        </div>
        <ol class="breadcrumb p-0 m-0">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">Event Details</li>
        </ol>
      </div>
    </div>
  </div>
</section>

<!-- Event Details Section -->
<section class="event-details section">
  <div class="container">
    <div class="row mt-30">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="block">
          <!-- Event Information -->
          <article class="event-post single">
            <div class="post-thumb">
              <img [src]="event.image" alt="event-image" class="img-fluid">
            </div>
            <div class="post-content">
              <div class="date">
                <h4>{{ event.label }} <span>{{ event.startDate | date: 'dd MMM yyyy' }} - {{ event.endDate | date: 'dd MMM yyyy' }}</span></h4>
              </div>
              <div class="post-title">
                <h3>{{ event.label }}</h3>
              </div>
              <div class="post-meta">
                <ul class="list-inline">
                  <li class="list-inline-item"><strong>Artists:</strong>
                    <ul>
                      <li *ngFor="let artist of event.artists">{{ artist.name }}</li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </article>

          <!-- Edit Event Form -->
          <div class="edit-event-form">
            <h5>Edit Event</h5>
            <form [formGroup]="eventForm" (ngSubmit)="updateEvent()">
              <label for="label">Event Name</label>
              <input id="label" formControlName="label">
              <div *ngIf="eventForm.get('label')?.invalid && eventForm.get('label')?.touched">
                <small class="error">Name is required and must be at least 3 characters long</small>
              </div>

              <label for="startDate">Start Date</label>
              <input id="startDate" formControlName="startDate" type="date">
              <div *ngIf="eventForm.get('startDate')?.invalid && eventForm.get('startDate')?.touched">
                <small class="error">Start date must be in the future</small>
              </div>

              <label for="endDate">End Date</label>
              <input id="endDate" formControlName="endDate" type="date">
              <div *ngIf="eventForm.get('endDate')?.invalid && eventForm.get('endDate')?.touched">
                <small class="error">End date must be after the start date</small>
              </div>

              <button type="submit" [disabled]="eventForm.invalid">Update Event</button>
            </form>
          </div>

          <!-- Add or Remove Artists -->
          <div class="artists-management">
            <h5>Manage Artists</h5>
            <form (ngSubmit)="addArtistToEvent()">
              <label for="artist">Add Artist</label>
              <input id="artist" [(ngModel)]="newArtistName" name="artist" placeholder="Artist name">
              <button type="submit" [disabled]="!newArtistName">Add Artist</button>
            </form>
            <div class="artist-list">
              <ul>
                <li *ngFor="let artist of event.artists">
                  {{ artist.name }} <button (click)="removeArtistFromEvent(artist)">Remove</button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

